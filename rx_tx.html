<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project Title | Jasper Lee</title>
  <link rel="stylesheet" href="style.css?v=20240621" />
  <style>
    .project-detail .project-copy .detail-intro {
      color: rgba(217, 228, 255, 0.92);
      margin-bottom: 1.5rem;
    }

    .project-detail .project-copy .detail-grid {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: clamp(1rem, 2.5vw, 1.75rem);
      margin-bottom: clamp(1.75rem, 3vw, 2.5rem);
      width: min(100%, 90vw);
      margin-inline: auto;
    }

    .project-detail .project-copy .detail-card {
      background: rgba(10, 22, 58, 0.55);
      border: 1px solid rgba(80, 124, 210, 0.4);
      border-radius: 16px;
      box-shadow: 0 22px 55px rgba(3, 9, 28, 0.55);
      padding: clamp(1.1rem, 2.4vw, 1.6rem);
      min-width: 0;
      width: min(100%, 90vw);
      box-sizing: border-box;
      margin-inline: auto;
    }

    .project-detail .project-copy .detail-card h4 {
      margin-top: 0;
      margin-bottom: 0.85rem;
      font-weight: 500;
      color: #f2f6ff;
    }

    .project-detail .project-copy .detail-card ul {
      margin: 0;
      padding-left: 1.1rem;
      line-height: 1.65;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .project-detail .project-copy .detail-card ul li + li {
      margin-top: 0.35rem;
    }

    .project-detail .project-copy .code-card {
      margin-top: clamp(1.5rem, 3vw, 2.5rem);
    }

    .project-detail .project-copy .code-card p {
      margin-bottom: 1rem;
      color: rgba(217, 228, 255, 0.85);
    }

    .project-detail .project-copy .code-card pre {
      background: rgba(8, 18, 46, 0.75);
      border: 1px solid rgba(82, 124, 210, 0.38);
      border-radius: 14px;
      padding: 1.1rem clamp(1.1rem, 2.5vw, 1.75rem);
      margin: 0;
      overflow-x: auto;
      box-shadow: inset 0 0 25px rgba(6, 12, 32, 0.55);
      max-width: 100%;
    }

    .project-detail .project-copy .code-card code {
      display: block;
      font-family: "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.92rem;
      line-height: 1.6;
      color: #f4f8ff;
      white-space: pre-wrap;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .project-detail .follow-progress {
      justify-content: center;
    }

    .project-detail .progress-button {
      display: inline-block;
      padding: 0.9rem 1.8rem;
      border-radius: 999px;
      background: linear-gradient(135deg, #6fa8ff, #4a72d9);
      color: #0a122e;
      font-weight: 600;
      text-decoration: none;
      box-shadow: 0 12px 35px rgba(20, 74, 170, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .project-detail .progress-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(20, 74, 170, 0.45);
    }

    /* .project-detail .project-section.reverse .project-copy {
      flex: 1 1 100%;
      width: 100%;
    } */

    @media (max-width: 640px) {
      .project-detail .project-copy .detail-card {
        padding: clamp(1rem, 4vw, 1.35rem);
      }

      .project-detail .project-copy .code-card pre {
        padding: clamp(0.85rem, 4vw, 1.25rem);
      }

      .project-detail .project-copy .code-card code {
        font-size: 0.88rem;
      }
    }
  </style>
</head>
<body class="brain-theme project-detail">
  <canvas id="brain-canvas"></canvas>

  <header>
    <div class="nav-left">
      <h1 class="logo">Jasper Lee</h1>
      <nav>
        <a href="index.html#about">About</a>
        <a href="index.html#left-brain" class="active">Left Brain</a>
        <a href="index.html#right-brain">Right Brain</a>
        <a href="index.html#contact">Contact</a>
      </nav>
    </div>
    <!-- <a class="back-link" href="index.html#left-brain">← Back to Left Brain</a> -->
  </header>

  <main class="project-page">
    <section class="project-shell">
      <h2>Custom Radio Transmitter & Receiver</h2>
      <p class="project-tagline"> The 1st IMU based radio communication system with ESPNOW Wifi protocol.</p>

      <div class="project-section">
        <div class="project-media">
          <img src="transmitter.HEIC" alt="Prototype of the project" />
        </div>
        <div class="project-copy">
          <h3>Background/Origin</h3>
          <p>
            The idea of controlling devices directly with our hands — especially when those devices are physically 
            out of reach — has always fascinated me. It suggests a future in which human intention can extend 
            seamlessly into the surrounding environment, allowing us to interact with and shape spaces beyond 
            our immediate physical limits.</br>

            To explore this concept, I began with a familiar platform: the quadcopter. Rather than using a commercial 
          remote controller, I set out to design a custom wireless control system from scratch. 
          After evaluating several options, I chose ESP-NOW on ESP32 modules as the communication backbone 
          due to its low latency, reliability, and suitability for real-time control.
          </p>
        </div>
      </div>

      <div class="project-section reverse">
        <div class="project-copy">
          <h3>Engineering the Solution</h3>
          <p class="detail-intro">
            A Raspberry Pi camera streams live video to an NVIDIA Jetson Orin Nano, where 
            each frame is processed in real time to track a colored marker (a green plastic target). 
            The software identifies the marker using color-based segmentation, computes its 
            centroid in the image plane, and continuously compares this position to the center of the frame. 
            The resulting error signal is used to command two servos (pan and tilt), which adjust the 
            camera’s orientation so that the marker remains centered. 
            This closed-loop pipeline — camera perception → error computation → actuator response — constitutes a classic visual servoing system.

            </br>The overall system architecture is shown below.
          </p>

          <div class="detail-grid">
            <div class="detail-card">
              <h4>Hardware :</h4>
              <ul>
                <li>Nvidia Jetson Orin Nano: runs computer vision model + control loops</li>
                <li>Raspberry Pi Cam V2.1: low latency image capture</li>
                <li>Sparkfun Pi Servo pHAT driver over I²C</li>
                <li>2 Servo Motors on channels 0 and 1</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
        

          <div class="project-section">
            <div class="project-video">
              <h3>Demonstrating how IMU orientation maps to the attitude displayed in Betaflight: IMU RX to Esp32-C3 TX & FC TX.</h3>
                <p>
                  The video below shows a working ESP32-based RX–TX link using the ESP-NOW protocol. 
                  Handheld IMU motion is streamed wirelessly and visualized in real time within the Betaflight interface, 
                  demonstrating minimal latency and reliable data transmission.
                </p>
              <div class="video-frame">
                <iframe 
                  src="https://www.youtube.com/embed/hDf78mtOetc"
                  title="Project Video"
                  frameborder="0"
                  allowfullscreen>
                </iframe>
              </div>
            </div>
          </div>
          

      <div class="project-section">
        <div class="project-media">
          <img src="esp32dev.HEIC" alt="Prototype of the project" />
        </div>
        <div class="project-copy">
          <h3>IMU-Based RC Transmitter over ESP-NOW (ESP32 + ICM-20948)</h3>
          <p>
            The custom wireless transmitter functions as a fully self-contained 
            RC controller built around an ESP32. The ESP32 reads an ICM-20948 IMU over I²C, 
            computing roll and pitch from accelerometer tilt equations while estimating 
            yaw through integrated gyroscope data with wraparound handling. 
            Throttle is sampled from an analog potentiometer, and all control channels 
            are passed through tuned exponential moving-average (first-order) low-pass 
            filters to reduce noise and jitter. These signals are then mapped to standard 
            RC PWM-equivalent values (1000–2000 µs) for roll, pitch, throttle, yaw, and 
            an auxiliary arming channel. Control commands are broadcast at 150 Hz over 
            ESP-NOW on a fixed Wi-Fi channel with power saving disabled to minimize latency, 
            and each packet includes a sequence number for debugging and integrity monitoring. 
            To enhance safety, I implemented a debounced arming toggle with a throttle-low 
            interlock to prevent accidental arming at high power.
          </p>
        </div>
      </div>

      <div class="project-section reverse">
        <div class="project-media">
          <img src="esp32c3.HEIC" alt="Prototype of the project" />
        </div>
        <div class="project-copy">
          <h3>ESP-NOW to CRSF Receiver Bridge (ESP32-C3 → Betaflight Flight Controller)</h3>
          <p>
            I implemented a low-latency ESP32-C3 receiver that bridges ESP-NOW packets to the 
            CRSF protocol used by a drone flight controller. The receiver listens on a fixed 
            Wi-Fi channel, parses a packed five-channel control message (roll, pitch, throttle, yaw, arm), 
            and converts standard 1000–2000 µs RC values into CRSF’s 11-bit channel range. 
            It then bit-packs 16 channels into the 22-byte CRSF payload and appends a 
            CRC-8 checksum (polynomial 0xD5) to ensure protocol integrity. Complete CRSF frames 
            are streamed to the flight controller over UART at 420 kbaud at approximately 150 Hz. 
            A watchdog failsafe was added that automatically disarms and reduces throttle if 
            no valid packets are received within 300 ms.
          </p>
        </div>
      </div>

    

      <div class="project-section follow-progress">
        <div class="project-copy">
          <a
            class="progress-button"
            href="https://jjasper-llee.github.io/quadcopter.html"
            target="_blank"
            rel="noopener noreferrer"
          >
            Click to see drone implementation
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 Jasper Lee</p>
  </footer>

  <script>
    (function () {
      const desiredHighlight = 'left';

      function applyHighlight() {
        if (window.setBrainHighlight) {
          window.setBrainHighlight(desiredHighlight);
        } else {
          window.pendingBrainHighlight = desiredHighlight;
        }
      }

      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        applyHighlight();
      } else {
        document.addEventListener('DOMContentLoaded', applyHighlight);
      }
    })();
  </script>
  <script src="brain.js?v=20240621" defer></script>
</body>
</html>
