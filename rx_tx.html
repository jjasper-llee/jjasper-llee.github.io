<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project Title | Jasper Lee</title>
  <link rel="stylesheet" href="style.css?v=20240621" />
  <style>
    .project-detail .project-copy .detail-intro {
      color: rgba(217, 228, 255, 0.92);
      margin-bottom: 1.5rem;
    }

    .project-detail .project-copy .detail-grid {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: clamp(1rem, 2.5vw, 1.75rem);
      margin-bottom: clamp(1.75rem, 3vw, 2.5rem);
      width: min(100%, 90vw);
      margin-inline: auto;
    }

    .project-detail .project-copy .detail-card {
      background: rgba(10, 22, 58, 0.55);
      border: 1px solid rgba(80, 124, 210, 0.4);
      border-radius: 16px;
      box-shadow: 0 22px 55px rgba(3, 9, 28, 0.55);
      padding: clamp(1.1rem, 2.4vw, 1.6rem);
      min-width: 0;
      width: min(100%, 90vw);
      box-sizing: border-box;
      margin-inline: auto;
    }

    .project-detail .project-copy .detail-card h4 {
      margin-top: 0;
      margin-bottom: 0.85rem;
      font-weight: 500;
      color: #f2f6ff;
    }

    .project-detail .project-copy .detail-card ul {
      margin: 0;
      padding-left: 1.1rem;
      line-height: 1.65;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .project-detail .project-copy .detail-card ul li + li {
      margin-top: 0.35rem;
    }

    .project-detail .project-copy .code-card {
      margin-top: clamp(1.5rem, 3vw, 2.5rem);
    }

    .project-detail .project-copy .code-card p {
      margin-bottom: 1rem;
      color: rgba(217, 228, 255, 0.85);
    }

    .project-detail .project-copy .code-card pre {
      background: rgba(8, 18, 46, 0.75);
      border: 1px solid rgba(82, 124, 210, 0.38);
      border-radius: 14px;
      padding: 1.1rem clamp(1.1rem, 2.5vw, 1.75rem);
      margin: 0;
      overflow-x: auto;
      box-shadow: inset 0 0 25px rgba(6, 12, 32, 0.55);
      max-width: 100%;
    }

    .project-detail .project-copy .code-card code {
      display: block;
      font-family: "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.92rem;
      line-height: 1.6;
      color: #f4f8ff;
      white-space: pre-wrap;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .project-detail .follow-progress {
      justify-content: center;
    }

    .project-detail .progress-button {
      display: inline-block;
      padding: 0.9rem 1.8rem;
      border-radius: 999px;
      background: linear-gradient(135deg, #6fa8ff, #4a72d9);
      color: #0a122e;
      font-weight: 600;
      text-decoration: none;
      box-shadow: 0 12px 35px rgba(20, 74, 170, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .project-detail .progress-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(20, 74, 170, 0.45);
    }

    .project-detail .project-section.reverse .project-copy {
      flex: 1 1 100%;
      width: 100%;
    }

    @media (max-width: 640px) {
      .project-detail .project-copy .detail-card {
        padding: clamp(1rem, 4vw, 1.35rem);
      }

      .project-detail .project-copy .code-card pre {
        padding: clamp(0.85rem, 4vw, 1.25rem);
      }

      .project-detail .project-copy .code-card code {
        font-size: 0.88rem;
      }
    }
  </style>
</head>
<body class="brain-theme project-detail">
  <canvas id="brain-canvas"></canvas>

  <header>
    <div class="nav-left">
      <h1 class="logo">Jasper Lee</h1>
      <nav>
        <a href="index.html#about">About</a>
        <a href="index.html#left-brain" class="active">Left Brain</a>
        <a href="index.html#right-brain">Right Brain</a>
        <a href="index.html#contact">Contact</a>
      </nav>
    </div>
    <!-- <a class="back-link" href="index.html#left-brain">← Back to Left Brain</a> -->
  </header>

  <main class="project-page">
    <section class="project-shell">
      <h2>Custom Radio Transmitter & Receiver</h2>
      <p class="project-tagline"> The 1st IMU based radio communication system with ESPNOW Wifi protocol.</p>

      <div class="project-section">
        <div class="project-media">
          <img src="transmitter.HEIC" alt="Prototype of the project" />
        </div>
        <div class="project-copy">
          <h3>Background/Origin</h3>
          <p>
            The thought of being able to control devices with our bare hands fascinates me, espcially when those
            devices are out of our reach. This gives us command of environments that extend beyond our physical capabilities. 
            I decided to start with the classic quadcopter, and build a custom radio communication system. After some research
            I decided to use ESPNOW from Esp32 modules, a reliable and quick way of sending signals.
          </p>
        </div>
      </div>

      <div class="project-section reverse">
        <div class="project-copy">
          <h3>Engineering the Solution</h3>
          <p class="detail-intro">
            A Raspberr Pi (Rpi) camera streams video into the Jetson Orin Nano. The code detects a colored marker 
          (a green piece of plastic) in each frame, computes its centroid, and then commands two servos 
          (X and Y axes) to translate/aim so the marker stays centered in the image. This is essentially
          visual servoing: camera feedback → error → actuator commands. Below is my System Architecture:
          </p>

          <div class="detail-grid">
            <div class="detail-card">
              <h4>Hardware :</h4>
              <ul>
                <li>Nvidia Jetson Orin Nano: runs computer vision model + control loops</li>
                <li>Raspberry Pi Cam V2.1: low latency image capture</li>
                <li>Sparkfun Pi Servo pHAT driver over I²C</li>
                <li>2 Servo Motors on channels 0 and 1</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
        

          <div class="project-section">
            <div class="project-video">
              <h3>Demonstrating how IMU orientation maps to the attitude displayed in Betaflight: IMU RX to Esp32-C3 TX & FC TX.</h3>
                <p>
                  The video below demonstrates a successful RX to TX communication through Esp32 ESPNOW Wifi Protocol. IMU orientation is reflected in
                the Betaflight GUI, showing undelayed real time response. 
                </p>
              <div class="video-frame">
                <iframe 
                  src="https://www.youtube.com/embed/hDf78mtOetc"
                  title="Project Video"
                  frameborder="0"
                  allowfullscreen>
                </iframe>
              </div>
            </div>
          </div>
          

      <div class="project-section">
        <div class="project-media">
          <img src="esp32dev.HEIC" alt="Prototype of the project" />
        </div>
        <div class="project-copy">
          <h3>IMU-Based RC Transmitter over ESP-NOW (ESP32 + ICM-20948)</h3>
          <p>
            The way this custom wireless transmitter works is by having the ESP32 act like a RC transmitter.
            First, the ESP32 reads an ICM-20948 IMU over I²C, computes roll and pitch from accelerometer tilt 
            equations, and estimates yaw via gyro integration with wraparound handling. Throttle is then read from 
            an analog potentiometer and all channels are smoothed using tuned exponential movng average low-pass filters to 
            reduce jitter. The system maps attitude and throttle to standard RC PWM-equivalent values 
            (1000–2000 µs) for roll, pitch, throttle, yaw, and an AUX arming channel. Following, commands are broadcast 
            at 150 Hz using ESP-NOW on a fixed Wi-Fi channel with power saving disabled for low latency, and 
            include sequence numbers for debugging and packet integrity monitoring. Finally, I implemented a safety-focused 
            arming toggle with debounce and throttle-low interlock.

          </p>
        </div>
      </div>

      <div class="project-section reverse">
        <div class="project-media">
          <img src="esp32c3.HEIC" alt="In-progress build of the project" />
        </div>
        <div class="project-copy">
          <h3>ESP-NOW to CRSF Receiver Bridge (ESP32-C3 → Betaflight Flight Controller)</h3>
          <p>
            Implemented a low-latency receiver that converts ESP-NOW packets into CRSF 
            serial frames for a drone flight controller. The ESP32-C3 listens on a 
            fixed Wi-Fi channel, parses a packed 5-channel control struct 
            (roll/pitch/throttle/yaw/arm), maps 1000–2000 µs RC values into CRSF’s 
            11-bit channel range, bit-packs 16 channels into the 22-byte CRSF payload, 
            and appends a CRC8 (poly 0xD5) for protocol integrity. Frames are streamed 
            to the FC over UART at 420 kbaud at ~150 Hz. Added a watchdog failsafe that 
            disarms and drops throttle if packets are not received within 300 ms.
          </p>
        </div>
      </div>
      
   

      <div class="project-section follow-progress">
        <div class="project-copy">
          <a
            class="progress-button"
            href="https://jjasper-llee.github.io/quadcopter.html"
            target="_blank"
            rel="noopener noreferrer"
          >
            Click to see drone implementation
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 Jasper Lee</p>
  </footer>

  <script>
    (function () {
      const desiredHighlight = 'left';

      function applyHighlight() {
        if (window.setBrainHighlight) {
          window.setBrainHighlight(desiredHighlight);
        } else {
          window.pendingBrainHighlight = desiredHighlight;
        }
      }

      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        applyHighlight();
      } else {
        document.addEventListener('DOMContentLoaded', applyHighlight);
      }
    })();
  </script>
  <script src="brain.js?v=20240621" defer></script>
</body>
</html>
